import './polyfills.server.mjs';
import{a as q,b as M,d as I,e as w,f as H,g as $,h as A,i as J,j as K,k as Q,l as X,m as Y,n as Z,o as p}from"./chunk-FOS4Y5SU.mjs";import{Ea as W,Ha as S,K as d,L as l,Ma as z,Q as L,S as g,U as i,V as n,W as _,X as T,Xa as y,Y as m,Z as B,_ as a,_a as f,aa as V,ba as N,ca as P,da as D,fa as x,g as E,h as C,j as R,k as j,m as b,n as v,r as G,s as U}from"./chunk-ZSLMUCEU.mjs";import"./chunk-5XUXGTUW.mjs";var u=class r{constructor(t){this.router=t}username="";password="";adminUsername="admin";adminPassword="password";onLogin(){this.username===this.adminUsername&&this.password===this.adminPassword?(localStorage.setItem("isLoggedIn","true"),this.router.navigate(["/admin/dashboard"])):(p.fire({icon:"error",title:"Oops...",text:"Invalid credits!",background:"#1d1819",color:"#f5f5dc",iconColor:"red",confirmButtonColor:"#808080"}),localStorage.removeItem("isLoggedIn"))}static \u0275fac=function(e){return new(e||r)(l(y))};static \u0275cmp=b({type:r,selectors:[["app-adminlogin"]],standalone:!0,features:[x],decls:10,vars:2,consts:[[1,"adminlogin",3,"ngSubmit"],["type","text","name","username","required","",3,"ngModelChange","ngModel"],["type","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(e,o){e&1&&(i(0,"section")(1,"form",0),m("ngSubmit",function(){return o.onLogin()}),i(2,"h1"),a(3,"USERNAME"),n(),i(4,"input",1),D("ngModelChange",function(c){return P(o.username,c)||(o.username=c),c}),n(),i(5,"h1"),a(6,"PASSWORD"),n(),i(7,"input",2),D("ngModelChange",function(c){return P(o.password,c)||(o.password=c),c}),n(),i(8,"button",3),a(9,"LOG IN"),n()()()),e&2&&(d(4),N("ngModel",o.username),d(3),N("ngModel",o.password))},dependencies:[Y,A,M,I,w,Q,$,H,S,f],styles:["section[_ngcontent-%COMP%]{height:80vh;align-items:center;justify-content:center;display:flex}.adminlogin[_ngcontent-%COMP%]{display:flex;width:600px;height:40vh;flex-direction:column;background-color:#1d1819;padding:20px;align-items:center;border-radius:16px}h1[_ngcontent-%COMP%]{color:#fff;font-size:40px;margin-top:8px}input[_ngcontent-%COMP%]{width:280px;height:5vh;background-color:#fff;border-radius:4px;font-size:16px;border:2px solid rgb(153,153,134)}button[_ngcontent-%COMP%]{cursor:pointer;width:240px;height:5vh;background-color:#fff;margin-top:12px;border-radius:8px;font-size:20px}button[_ngcontent-%COMP%]:hover{background-color:#1d1819;border:2px solid beige;transition:.5s;color:beige}"]})};var ee=(r,t)=>{let e=j(y);return typeof window<"u"&&!!localStorage.getItem("isLoggedIn")?!0:(e.navigate(["/admin"]),!1)};var O=class r{constructor(t){this.http=t}apiUrl="https://670581af031fd46a83103c90.mockapi.io/characters";addCharacter(t){return this.http.post(`${this.apiUrl}`,t)}updateCharacter(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}deleteCharacter(t){return this.http.delete(`${this.apiUrl}/${t}`)}static \u0275fac=function(e){return new(e||r)(R(z))};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})};function ne(r,t){if(r&1){let e=T();i(0,"div",12)(1,"p",13),m("click",function(){let s=G(e).$implicit,c=B();return U(c.selectCharacter(s,s.id))}),a(2),n()()}if(r&2){let e=t.$implicit;d(2),V(" ",e.name," (",e.role,") ")}}var h=class r{constructor(t,e,o){this.fb=t;this.adminService=e;this.getDataService=o;this.characterForm=this.fb.group({img:[""],name:[""],role:[]})}characterForm;characters=[];selectedCharacterId=null;ngOnInit(){this.fetchCharacters()}fetchCharacters(){let t=localStorage.getItem("charactersData");t?this.characters=JSON.parse(t):this.getDataService.getData().then(e=>{this.characters=e})}onAdd(){let t=this.characterForm.value;this.adminService.addCharacter(t).subscribe(e=>{console.log("Character added:",e),this.characterForm.reset(),this.fetchCharacters(),p.fire({title:"SUCCESS",text:"Character added",icon:"success",background:"#1d1819",color:"#f5f5dc",iconColor:"#808080",confirmButtonColor:"#808080"})})}onUpdate(){if(this.selectedCharacterId){let t=this.characterForm.value;this.adminService.updateCharacter(this.selectedCharacterId,t).subscribe(e=>{console.log("Character updated:",e),this.characterForm.reset(),this.selectedCharacterId=null,this.fetchCharacters(),p.fire({title:"SUCCESS",text:"Character updated",icon:"success",background:"#1d1819",color:"#f5f5dc",iconColor:"#808080",confirmButtonColor:"#808080"})})}}onDelete(){this.selectedCharacterId&&this.adminService.deleteCharacter(this.selectedCharacterId).subscribe(()=>{console.log("Character deleted"),this.characterForm.reset(),this.selectedCharacterId=null,this.fetchCharacters(),p.fire({title:"complete",text:"Character deleted",icon:"error",background:"#1d1819",color:"#f5f5dc",iconColor:"#808080",confirmButtonColor:"#808080"})})}selectCharacter(t,e){this.selectedCharacterId=e,this.characterForm.patchValue(t)}static \u0275fac=function(e){return new(e||r)(l(X),l(O),l(q))};static \u0275cmp=b({type:r,selectors:[["app-admindashboard"]],standalone:!0,features:[x],decls:20,vars:4,consts:[[3,"formGroup"],[1,"inputs"],["for","img"],["id","img","formControlName","img","type","text"],["for","name"],["id","name","formControlName","name","type","text"],["for","role"],["id","role","formControlName","role","type","text"],["type","button",3,"click"],["type","button",3,"click","disabled"],[1,"characters"],["class","character-item",4,"ngFor","ngForOf"],[1,"character-item"],[3,"click"]],template:function(e,o){e&1&&(i(0,"section")(1,"form",0)(2,"div",1)(3,"label",2),a(4,"IMAGE URL:"),n(),_(5,"input",3),i(6,"label",4),a(7,"NAME:"),n(),_(8,"input",5),i(9,"label",6),a(10,"ROLE:"),n(),_(11,"input",7),i(12,"button",8),m("click",function(){return o.onAdd()}),a(13,"Add character"),n(),i(14,"button",9),m("click",function(){return o.onUpdate()}),a(15,"Update character"),n(),i(16,"button",9),m("click",function(){return o.onDelete()}),a(17,"Delete character"),n()(),i(18,"div",10),L(19,ne,3,2,"div",11),n()()()),e&2&&(d(),g("formGroup",o.characterForm),d(13),g("disabled",!o.selectedCharacterId),d(2),g("disabled",!o.selectedCharacterId),d(3),g("ngForOf",o.characters))},dependencies:[W,Z,A,M,I,w,J,K],styles:["section[_ngcontent-%COMP%]{width:100%;height:80vh;align-items:center;justify-content:center}form[_ngcontent-%COMP%]{max-width:800px;display:grid;grid-template-columns:1fr 1fr;margin:auto;background-color:#1d1819;position:relative;top:160px;height:50vh;gap:10px;padding:8px;border-radius:20px}.inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}label[_ngcontent-%COMP%]{color:beige;font-size:32px}input[_ngcontent-%COMP%]{width:400px;height:4vh;background-color:beige}button[_ngcontent-%COMP%]{cursor:pointer;background-color:beige;padding:16px;border-radius:12px}button[_ngcontent-%COMP%]:hover{color:beige;background-color:#1d1819;transition:.5s;border:2px solid beige}.character-item[_ngcontent-%COMP%]{cursor:pointer;border:1px solid #ccc;margin:5px 0;display:flex;flex-direction:column;background-color:#b1b1a4;border-radius:4px;color:#1d1819;padding:8px 0}.character-item[_ngcontent-%COMP%]:hover{background-color:beige;transition:.5s}"]})};var ae=[{path:"",component:u},{path:"dashboard",component:h,canActivate:[ee]}],k=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=v({type:r});static \u0275inj=C({imports:[f.forChild(ae),f]})};var te=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=v({type:r});static \u0275inj=C({imports:[S,k,u,h]})};export{te as AdminModule};
